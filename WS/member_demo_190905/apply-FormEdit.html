<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>王品電子菁英</title>
    <link rel="stylesheet" type="text/css" href="css/pace.css"><script type="text/javascript" src="js/pace.js"></script>
    <!--[if lt IE 10]>
    <script>alert('請使用IE10以上或Ghrome瀏覽器閱覽本站哦，謝謝');</script>    
    <![endif]-->
    <script src="js/jquery.min.js"></script>
    <script src="js/main.js"></script>
    <link rel="stylesheet" href="css/apply.css">
    <link href="css/bootstrap-material-design.min.css" rel="stylesheet">
</head>

<body>
    <header class="p0"></header>
    <div class="slider-wrapper theme-default">
        <div id="slider" class="nivoSlider"></div>
    </div>
    <div class="slideTitle"></div>
    <div class="content">
        <div class="t1">
            <i class="demo-icon icon-member">&#xe800;</i>
            <hr> 修改會員資料
        </div>
        <div class="box unhome edit">
            <div class="container">
                

                <div class="vTop">
                    <!-- <form action=""> -->
                        <div class="form-group ">
                            <label for="i5" class="control-label">※手機號碼</label>
                            <p type="number" class="form-control" id="mobile"></p>
                        </p>
                        <div class="form-group ">
                            <label for="i5" class="control-label">※密 碼</label>
                            <input type="password" class="form-control" id="pwd" maxlength="8">
                        </div>
                        <div class="form-group ">
                            <label for="i5" class="control-label">※姓 名</label>
                            <input type="text" class="form-control" id="cname" >
                        </div>
                        <div class="form-group radio genderForm">
                            <h5 class="control-label">※性 別</h5>
                            <label>
                                <input type="radio" name="gender" value="F" id="female" checked=""> 女 Female
                            </label>
                            <label>
                                <input type="radio" name="gender" value="M" id="male"> 男 Male
                            </label>
                        </div>
                        <div class="form-group date birthForm">
                            <h5 class="control-label">※生 日</h5>
                            <input type="text" id="birthday" readonly="true">    
                            <p>會員生日申請後無法異動</p>                       
                        </div>
                        <div class="form-group date mDayForm">
                            <h5 class="control-label">結婚紀念日</h5>
                            <input type="text" id="marryday">
                            <p>月份/日期，例：05/08
                        </div>
                        <div class="form-group email">
                            <label for="i5" class="control-label">E-mail</label>
                            <input type="email" class="form-control" id="email">
                        </div>
                        <div class="form-group checkbox">
                            <label>
                                願意收到王品牛排優惠：
                                <input type="checkbox" id="isCareerAD">
                            </label>
                        </div>
                         <button class="submit" onclick="chk();">確認送出</button>
                        <!-- <a href="" class="submit">確認送出</a> -->
                       
                    <!-- </form> -->
                    

                </div>
            </div>
        </div>
    </div>
    <div class="footer"></div>
    <script src="js/material.min.js"></script>
    <script src="WPJS/jquery.maskedinput.js"></script>
    <script src="WPJS/base.js"></script>
    <script src="WPJS/member.js"></script>
    <script>
    $(function() {

        if(typeof(loadSessionStorage("user_id"))=="undefined" || loadSessionStorage("user_id")=='')
        {
            saveSessionStorage('backurl','apply-formedit.html');
            window.location.href="memLogin.html";
        }

        $('#marryday').mask("?99/?99");
        $('#birthday').mask("?9999/?99/?99");
        
        $.material.init();

        /*
         $('#mobile').keypress(function (event) {
            if(this.value.length==10) 
                {
                    if (event.which == 8) { return; }
                    if (event.which == 46) { return; }
                    return false;
                }
            })
        */
        api_get(loadSessionStorage("user_id"));

    });

    function chk()
    {
        /*
        if(!isValidMobile($('#mobile').val())) 
        {   $('#mobile').focus(); sweetAlert("Oops...", '手機號碼不正確', "error");
            $('.mobileForm').addClass('has-error');
         return false; 
               
         }
         */

         if($('#pwd').val()!='')
         {
            if($('#pwd').val().length < 4 || $('#pwd').val().length > 8)
            {
                $('#pwd').focus();
                sweetAlert("Oops...", '請輸入4-8個字的密碼', "error"); 
                $('.pwForm').addClass('has-error');
                // $('#lblpwd').attr('class','form-group label-floating has-error');
                 return false; 
            }
        }

        if($('#cname').val()=='')        
        {
         
          $('#cname').focus();
            sweetAlert("Oops...", '請輸入您的姓名', "error"); 
            $('.nameForm').addClass('has-error');
            return false; 

        }

        if($('#email').val()!='')        
        {
             if(!isValidEmailAddress($('#email').val()))
             {
              $('#email').focus();
                sweetAlert("Oops...", '請輸入正確的EMail', "error"); 
                $('.email').addClass('has-error');
                return false; 
             }   
        }

        if($('#marryday').val() != '') 
        { 
           if(!IsValidDate('2000/'+$('#marryday').val()))             
            {
                $('#marryday').focus(); 
                sweetAlert("Oops...", '請輸入正確的結婚紀念日', "error"); 
                $('.birthForm').addClass('has-error');
                return false; 
            } 
        }

        if($('#birthday').val() != '') 
        { 
           if(!IsValidDate($('#birthday').val()))             
            {
                $('#birthday').focus(); 
                sweetAlert("Oops...", '請輸入正確的生日', "error"); 
                $('.birthForm').addClass('has-error');
                return false; 
            } 
        }

        var gender='';
            if($('#male').prop('checked'))
            {
                gender='M';
            }
            if($('#female').prop('checked'))
            {
                gender='F';
            }
                        
        var isgetcareerad=0;
            if($('#isCareerAD').prop('checked')==true)
            {
                isgetcareerad=1;
            }

        var isgetallcareerad=0;
            if($('#isAllCareerAD').prop('checked')==true)
            {
                isgetallcareerad=1;
            }

        api_edit(gender,$('#cname').val(),$('#pwd').val(),$('#birthday').val(),$('#marryday').val(),$('#mobile').text(),$('#email').val(),isgetcareerad,isgetallcareerad);

    }

    </script>
</body>

</html>
